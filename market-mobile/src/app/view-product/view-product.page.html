<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home" text=""></ion-back-button>
    </ion-buttons>
    <ion-title>Detalhes</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <div *ngIf="!produto" style="height: 100%; display: flex; align-items: center; justify-content: center;">
    <ion-spinner name="crescent" color="primary"></ion-spinner>
  </div>

  <div *ngIf="produto">
    
    <div style="background: white; padding: 20px; text-align: center; border-bottom: 1px solid #eee;">
      <img *ngIf="produto.imagem" 
           [src]="'http://127.0.0.1:8000/media/' + produto.imagem" 
           style="max-height: 300px; object-fit: contain;" />
    </div>

    <div class="ion-padding">
      
      <div style="margin-bottom: 10px;">
        <ion-chip color="primary" style="font-weight: 700;">{{ produto.plataforma }}</ion-chip>
        <ion-chip color="medium" outline *ngIf="produto.genero">{{ produto.genero }}</ion-chip>
      </div>

      <h1 style="font-size: 1.8rem; font-weight: 900; color: #111; margin-top: 0; line-height: 1.2;">
        {{ produto.nome }}
      </h1>
      
      <h2 style="color: #10b981; font-weight: 900; font-size: 2.2rem; margin-top: 10px;">
        {{ produto.preco | currency:'BRL' }}
      </h2>

      <div style="height: 1px; background: #e5e7eb; margin: 20px 0;"></div>

      <h3 style="font-weight: 700; color: #444;">Sobre o produto</h3>
      <p style="color: #666; line-height: 1.6; font-size: 1rem;">
        {{ produto.descricao }}
      </p>

    </div>
  </div>

</ion-content>

<ion-footer *ngIf="produto" style="box-shadow: 0 -4px 10px rgba(0,0,0,0.05);">
  <ion-toolbar style="--background: white; padding: 10px;">
    <ion-button expand="block" color="success" (click)="adicionarAoCarrinho()" [disabled]="produto.estoque <= 0">
      {{ produto.estoque > 0 ? 'Adicionar ao Carrinho' : 'Produto Esgotado' }}
    </ion-button>
  </ion-toolbar>
</ion-footer>